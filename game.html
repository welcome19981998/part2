<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Battle | ä¸‰è‰²é—˜æˆ¯</title>

<style>
* { box-sizing: border-box; }

html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #0f1220;
  font-family: system-ui, sans-serif;
  color: #eaeaf0;
}

/* ===== ç¸¦ã‚­ãƒ£ãƒ³ãƒã‚¹å…±é€š ===== */
.app-wrapper {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

.app {
  width: 360px;
  height: 640px;
  background: linear-gradient(180deg, #1c2150, #171a2e);
  display: flex;
  flex-direction: column;
  padding: 12px;
  transform-origin: center;
}

/* ===== ä¸Šä¸‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ ===== */
.player-area {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* ç›¸æ‰‹ã¯å³å¯„ã› */
.enemy {
  align-items: flex-end;
}

/* è‡ªåˆ†ã¯å·¦å¯„ã› */
.self {
  align-items: flex-start;
}

/* ===== ãƒ‡ãƒƒã‚­ãƒ»å¢“åœ°ï¼ˆç¸¦é…ç½®ï¼‰ ===== */
.zone-column {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.zone {
  width: 48px;
  height: 64px;
  border-radius: 8px;
  background: #2a2f55;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  opacity: 0.8;
}

/* ===== æ‰‹æœ­ ===== */
.hand {
  display: flex;
  gap: 8px;
}

.card {
  width: 72px;
  height: 96px;
  background: #4f6bff;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  cursor: pointer;
}

/* ===== ãƒãƒˆãƒ«å ´ ===== */
.battlefield {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.7;
}

/* ===== ãƒ¢ãƒ¼ãƒ€ãƒ«ï¼ˆç¸¦ã‚­ãƒ£ãƒ³ãƒã‚¹æ–¹å¼ï¼‰ ===== */
.card-modal {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  background: rgba(0,0,0,0.65);
  z-index: 10000;
}

.modal-canvas {
  width: 360px;
  height: 640px;
  display: flex;
  justify-content: center;
  align-items: center;
  transform-origin: center;
}

.card-modal-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

/* æ‹¡å¤§ã‚«ãƒ¼ãƒ‰ï¼ˆæœ€å¤§åŒ–ï¼‰ */
.card-large {
  width: 260px;
  height: 360px;
  background: #4f6bff;
  border-radius: 20px;
  font-size: 3.5rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* ãƒœã‚¿ãƒ³ */
.modal-buttons {
  width: 260px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.modal-buttons button {
  padding: 14px;
  font-size: 0.95rem;
  border-radius: 14px;
  border: none;
  cursor: pointer;
  font-weight: bold;
}

.primary { background: #4f6bff; color: #fff; }
.secondary { background: #2a2f55; color: #fff; }
</style>
</head>

<body>

<div class="app-wrapper">
  <div class="app" id="app">

    <!-- ç›¸æ‰‹ï¼ˆå³ä¸Šï¼‰ -->
    <div class="player-area enemy">
      <div class="zone-column">
        <div class="zone">ãƒ‡ãƒƒã‚­</div>
        <div class="zone">å¢“åœ°</div>
      </div>

      <div class="hand">
        <div class="card" onclick="openEnemyCard('ğŸŸ¥')">ğŸŸ¥</div>
        <div class="card" onclick="openEnemyCard('ğŸŸ¨')">ğŸŸ¨</div>
        <div class="card" onclick="openEnemyCard('ğŸŸ¦')">ğŸŸ¦</div>
      </div>
    </div>

    <div class="battlefield">
      ã‚«ãƒ¼ãƒ‰é¸æŠ
    </div>

    <!-- è‡ªåˆ†ï¼ˆå·¦ä¸‹ï¼‰ -->
    <div class="player-area self">
      <div class="hand">
        <div class="card" onclick="openPlayerCard('ğŸŸ¥')">ğŸŸ¥</div>
        <div class="card" onclick="openPlayerCard('ğŸŸ¨')">ğŸŸ¨</div>
        <div class="card" onclick="openPlayerCard('ğŸŸ¦')">ğŸŸ¦</div>
      </div>

      <div class="zone-column">
        <div class="zone">ãƒ‡ãƒƒã‚­</div>
        <div class="zone">å¢“åœ°</div>
      </div>
    </div>

  </div>
</div>

<!-- ===== ã‚«ãƒ¼ãƒ‰æ‹¡å¤§ãƒ¢ãƒ¼ãƒ€ãƒ« ===== -->
<div class="card-modal" id="cardModal">
  <div class="modal-canvas" id="modalCanvas">
    <div class="card-modal-content">
      <div class="card-large" id="modalCard"></div>
      <div class="modal-buttons" id="modalButtons"></div>
    </div>
  </div>
</div>

<script>
/* ===== scaleå…±é€š ===== */
function fit(target, w, h) {
  const scale = Math.min(
    window.innerWidth / w,
    window.innerHeight / h
  );
  target.style.transform = `scale(${scale})`;
}

const app = document.getElementById("app");
const modalCanvas = document.getElementById("modalCanvas");

function resizeAll() {
  fit(app, 360, 640);
  fit(modalCanvas, 360, 640);
}
window.addEventListener("load", resizeAll);
window.addEventListener("resize", resizeAll);

/* ===== ãƒ¢ãƒ¼ãƒ€ãƒ«åˆ¶å¾¡ ===== */
const cardModal = document.getElementById("cardModal");
const modalCard = document.getElementById("modalCard");
const modalButtons = document.getElementById("modalButtons");

function openCardModal(card, actions) {
  modalCard.textContent = card;
  modalButtons.innerHTML = "";

  actions.forEach(a => {
    const btn = document.createElement("button");
    btn.textContent = a.label;
    btn.className = a.type || "secondary";
    btn.onclick = a.onClick;
    modalButtons.appendChild(btn);
  });

  // å…±é€šã€Œé–‰ã˜ã‚‹ã€
  const closeBtn = document.createElement("button");
  closeBtn.textContent = "é–‰ã˜ã‚‹";
  closeBtn.className = "secondary";
  closeBtn.onclick = closeCardModal;
  modalButtons.appendChild(closeBtn);

  cardModal.style.display = "flex";
}

function closeCardModal() {
  cardModal.style.display = "none";
}

cardModal.addEventListener("click", e => {
  if (e.target === cardModal) closeCardModal();
});

/* ===== è‡ªåˆ†ã‚«ãƒ¼ãƒ‰ ===== */
function openPlayerCard(card) {
  openCardModal(card, [
    {
      label: "èµ¤ã¨ã—ã¦å ´ã«å‡ºã™",
      type: "primary",
      onClick: () => alert(card + " ã‚’èµ¤ã§å‡ºã™")
    },
    {
      label: "é’ã¨ã—ã¦å ´ã«å‡ºã™",
      type: "primary",
      onClick: () => alert(card + " ã‚’é’ã§å‡ºã™")
    }
  ]);
}

/* ===== ç›¸æ‰‹ã‚«ãƒ¼ãƒ‰ ===== */
function openEnemyCard(card) {
  openCardModal(card, []);
}
</script>

</body>
</html>
