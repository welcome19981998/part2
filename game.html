<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Battle | ä¸‰è‰²é—˜æˆ¯</title>

<style>
* { box-sizing: border-box; }

html, body {
  margin: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: #0f1220;
  font-family: system-ui, sans-serif;
  color: #eaeaf0;
}

/* ===== ç¸¦ã‚­ãƒ£ãƒ³ãƒã‚¹ ===== */
.app-wrapper {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
}

.app {
  width: 360px;
  height: 640px;
  background: linear-gradient(180deg, #1c2150, #171a2e);
  padding: 12px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transform-origin: center;
}

/* ===== å…±é€šã‚«ãƒ¼ãƒ‰ã‚µã‚¤ã‚º ===== */
.card {
  width: 72px;
  height: 96px;
  border-radius: 10px;
  background: #4f6bff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  cursor: pointer;
}

/* ===== ãƒ‡ãƒƒã‚­ãƒ»å¢“åœ° ===== */
.zone-column {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.zone {
  width: 72px;
  height: 96px;
  border-radius: 10px;
  background: #2a2f55;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.75rem;
  opacity: 0.85;
}

/* ===== ç›¸æ‰‹ã‚¨ãƒªã‚¢ï¼ˆå·¦ä¸Šï¼‰ ===== */
.enemy-area {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}

.enemy-hand {
  display: flex;
  gap: 8px;
}

/* ===== ãƒãƒˆãƒ«ä¸­å¤® ===== */
.battlefield {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.6;
}

/* ===== è‡ªåˆ†ã‚¨ãƒªã‚¢ï¼ˆä¸‹ï¼‰ ===== */
.self-area {
  display: flex;
  justify-content: space-between; /* â† ã“ã‚Œã‚’è¿½åŠ  */
  align-items: flex-end;
  gap: 12px;
}

/* æ‰‹æœ­ã¯å·¦ã€ãƒ‡ãƒƒã‚­ã¯å³ */
.self-hand {
  display: flex;
  gap: 8px;
}

/* ===== ãƒ¢ãƒ¼ãƒ€ãƒ« ===== */
.card-modal {
  position: fixed;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  background: rgba(0,0,0,0.65);
  z-index: 10000;
}

.modal-canvas {
  width: 360px;
  height: 640px;
  display: flex;
  justify-content: center;
  align-items: center;
  transform-origin: center;
}

.card-modal-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

.card-large {
  width: 260px;
  height: 360px;
  border-radius: 20px;
  background: #4f6bff;
  font-size: 3.5rem;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-buttons {
  width: 260px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.modal-buttons button {
  padding: 14px;
  font-size: 0.95rem;
  border-radius: 14px;
  border: none;
  cursor: pointer;
  font-weight: bold;
}

.primary { background: #4f6bff; color: #fff; }
.secondary { background: #2a2f55; color: #fff; }
</style>
</head>

<body>

<div class="app-wrapper">
  <div class="app" id="app">

    <!-- ç›¸æ‰‹ï¼ˆå·¦ä¸Šï¼‰ -->
    <div class="enemy-area">
      <div class="zone-column">
        <div class="zone">ãƒ‡ãƒƒã‚­</div>
        <div class="zone">å¢“åœ°</div>
      </div>

      <div class="enemy-hand">
        <div class="card" onclick="openEnemyCard('ğŸŸ¥')">ğŸŸ¥</div>
        <div class="card" onclick="openEnemyCard('ğŸŸ¨')">ğŸŸ¨</div>
        <div class="card" onclick="openEnemyCard('ğŸŸ¦')">ğŸŸ¦</div>
      </div>
    </div>

    <div class="battlefield">
      ã‚«ãƒ¼ãƒ‰é¸æŠ
    </div>

    <!-- è‡ªåˆ†ï¼ˆä¸‹ï¼‰ -->
    <div class="self-area">
      <div class="self-hand">
        <!-- ã“ã®ã‚«ãƒ¼ãƒ‰ã¯è‰²é¸æŠã‚ã‚Š -->
        <div class="card" onclick="openPlayerCardMulti('ğŸŸ¥')">ğŸŸ¥</div>

        <!-- ã“ã®ã‚«ãƒ¼ãƒ‰ã¯ã€Œå ´ã«å‡ºã™ã€ã ã‘ -->
        <div class="card" onclick="openPlayerCardSimple('ğŸŸ¨')">ğŸŸ¨</div>

        <div class="card" onclick="openPlayerCardMulti('ğŸŸ¦')">ğŸŸ¦</div>
      </div>

      <div class="zone-column">
        <div class="zone">å¢“åœ°</div>
        <div class="zone">ãƒ‡ãƒƒã‚­</div>
      </div>
    </div>

  </div>
</div>

<!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="card-modal" id="cardModal">
  <div class="modal-canvas" id="modalCanvas">
    <div class="card-modal-content">
      <div class="card-large" id="modalCard"></div>
      <div class="modal-buttons" id="modalButtons"></div>
    </div>
  </div>
</div>

<script>
/* ===== scale ===== */
function fit(target, w, h) {
  const scale = Math.min(
    window.innerWidth / w,
    window.innerHeight / h
  );
  target.style.transform = `scale(${scale})`;
}

const app = document.getElementById("app");
const modalCanvas = document.getElementById("modalCanvas");

function resizeAll() {
  fit(app, 360, 640);
  fit(modalCanvas, 360, 640);
}
window.addEventListener("load", resizeAll);
window.addEventListener("resize", resizeAll);

/* ===== ãƒ¢ãƒ¼ãƒ€ãƒ« ===== */
const cardModal = document.getElementById("cardModal");
const modalCard = document.getElementById("modalCard");
const modalButtons = document.getElementById("modalButtons");

function openCardModal(card, actions) {
  modalCard.textContent = card;
  modalButtons.innerHTML = "";

  actions.forEach(a => {
    const btn = document.createElement("button");
    btn.textContent = a.label;
    btn.className = a.type || "secondary";
    btn.onclick = a.onClick;
    modalButtons.appendChild(btn);
  });

  const closeBtn = document.createElement("button");
  closeBtn.textContent = "é–‰ã˜ã‚‹";
  closeBtn.className = "secondary";
  closeBtn.onclick = closeCardModal;
  modalButtons.appendChild(closeBtn);

  cardModal.style.display = "flex";
}

function closeCardModal() {
  cardModal.style.display = "none";
}

cardModal.addEventListener("click", e => {
  if (e.target === cardModal) closeCardModal();
});

/* ===== è‡ªåˆ†ã‚«ãƒ¼ãƒ‰ï¼šè‰²é¸æŠã‚ã‚Š ===== */
function openPlayerCardMulti(card) {
  openCardModal(card, [
    { label: "èµ¤ã¨ã—ã¦å ´ã«å‡ºã™", type: "primary", onClick: () => alert("èµ¤") },
    { label: "é’ã¨ã—ã¦å ´ã«å‡ºã™", type: "primary", onClick: () => alert("é’") }
  ]);
}

/* ===== è‡ªåˆ†ã‚«ãƒ¼ãƒ‰ï¼šã‚·ãƒ³ãƒ—ãƒ« ===== */
function openPlayerCardSimple(card) {
  openCardModal(card, [
    { label: "å ´ã«å‡ºã™", type: "primary", onClick: () => alert("å‡ºã—ãŸ") }
  ]);
}

/* ===== ç›¸æ‰‹ã‚«ãƒ¼ãƒ‰ ===== */
function openEnemyCard(card) {
  openCardModal(card, []);
}
</script>

</body>
</html>
